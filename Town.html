<!doctype html>
<html>
    <head>
        <title>Village</title>
        <!-- a-frame -->
        <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
        <!-- event handler for a-frame entities-->
        <script src="https://unpkg.com/aframe-event-set-component@^4.0.0/dist/aframe-event-set-component.min.js"></script>
        <script src="https://unpkg.com/aframe-template-component@^3.1.1/dist/aframe-template-component.min.js"></script>
        <script src="script.js"></script>
    </head>
    
    <body>
        <a-scene>
            <!-- Asset Management System -->
            <a-assets>
                <img id="grass" src="img/grass01.jpg">
                <img id="grass-NRM" src="img/grass01_n.jpg">
                <a-asset-item id="house" src="img/scene.gltf"></a-asset-item>
                <a-asset-item id="fence" src="img/fence.gltf"></a-asset-item>
                <a-asset-item id="gate" src="img/gate.gltf"></a-asset-item>
                <a-asset-item id="woman" src="img/woman.gltf"></a-asset-item>
                <img id="sky" src="img/sky.jpg">

                <!-- Template for players to look at. -->
                <script id="look" type="text/html">
                    <a-entity
                        class="look"
                        geometry="primitive: plane; height:${height}; width:${width};"
                        material="side: double; opacity:0.0; transparent: true;" 
                        event-set__1="_event: mousedown; scale: 1 1 1"
                        event-set__2="_event: mouseup; scale: 1.2 1.2 1"
                        event-set__3="_event: mouseenter; scale: 1.2 1.2 1"
                        event-set__4="_event: mouseleave; scale: 1 1 1"
                        zoom-in="on: click; target: #camera; dur: 5000"
                    ></a-entity>
                </script>
            </a-assets>
            
            <!--Ground -->
            <a-plane material="color: #FFFFFF;
                       src: #grass;
                       repeat: 5000 5000;
                       normal-map: #grass-NRM;
                       normal-texture-repeat: 5000 5000"
                     rotation="-90 0 0"
                     scale="10000 10000 1">
            </a-plane>
            <!-- Sky -->
            <a-sky src="#sky">
            </a-sky>
            
            <!-- House -->

            <a-entity 
                  gltf-model="#house"
                  scale="0.01 0.01 0.01"
                  rotation="0 90 0"
                  position="-1.23 0.1 -21.27"
            >
            </a-entity>
            
            <a-entity 
                  gltf-model="#house"
                  scale="0.01 0.01 0.01"
                  rotation="0 -90 0" 
                  position="2.108  0.1 9.571"
            >
            </a-entity>
            
            <a-entity 
                  gltf-model="#house"
                  scale="0.01 0.01 0.01"
                  rotation="0 90 0"
                  position="17.182  0.1 -21.27"
            >
            </a-entity>
            
            <a-entity 
                  gltf-model="#house"
                  scale="0.01 0.01 0.01"
                  rotation="0 -90 0" 
                  position="20.994  0.1 9.571"
            >
            </a-entity>
            
            <!-- Fence -->
            <!-- Left -->
            <a-entity 
                    gltf-model="#fence"
                    rotation="0 -22.5 0"
                    position="-11.607 0 -27.092"
            >
            </a-entity>
            <a-entity 
                    gltf-model="#fence"
                    rotation="0 -22.5 0"
                    position="-11.607 0 -22.892"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 -22.5 0"
                position="-11.607 0 -18.692"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 -22.5 0"
                position="-11.607 0 2.592"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 -22.5 0"
                position="-11.607 0 6.792"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 -22.5 0"
                position="-11.607 0 10.992"
            >
            </a-entity>
            
            <!-- Bot -->
            
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="-11.646 0 15.111"
            >
            </a-entity>  
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="-11.646 0 15.111"
            >
            </a-entity> 
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="-11.646 0 15.111"
            >
            </a-entity> 
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="-11.646 0 15.111"
            >
            </a-entity> 
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="-7.446 0 15.111"
            >
            </a-entity> 
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="-3.246 0 15.111"
            >
            </a-entity> 
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="0.046 0 15.111"
            >
            </a-entity> 
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="4.146 0 15.111"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="8.246 0 15.111"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="12.346 0 15.111"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="16.446 0 15.111"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="20.546 0 15.111"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="24.646 0 15.111"
            >
            </a-entity>
            
            <!-- Right -->
            <a-entity 
                    gltf-model="#fence"
                    rotation="0 -22.5 0"
                    position="28.847 0 -27.092"
            >
            </a-entity>
            <a-entity 
                    gltf-model="#fence"
                    rotation="0 -22.5 0"
                    position="28.847 0 -22.892"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 -22.5 0"
                position="28.847 0 -18.692"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 -22.5 0"
                position="28.847 0 -14.492"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 -22.5 0"
                position="28.847 0 -10.292"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 -22.5 0"
                position="28.847 0 -6.092"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 -22.5 0"
                position="28.847 0 -1.917"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 -22.5 0"
                position="28.847 0 2.592"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 -22.5 0"
                position="28.847 0 6.792"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 -22.5 0"
                position="28.847 0 10.992"
            >
            </a-entity>
            <!-- Top -->

            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="-11.646 0 -27.120"
            >
            </a-entity>  
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="-11.646 0 -27.120"
            >
            </a-entity> 
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="-11.646 0 -27.120"
            >
            </a-entity> 
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="-11.646 0 -27.120"
            >
            </a-entity> 
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="-7.446 0 -27.120"
            >
            </a-entity> 
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="-3.246 0 -27.120"
            >
            </a-entity> 
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="0.046 0 -27.120"
            >
            </a-entity> 
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="4.146 0 -27.120"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="8.246 0 -27.120"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="12.346 0 -27.120"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="16.446 0 -27.120"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="20.546 0 -27.120"
            >
            </a-entity>
            <a-entity 
                gltf-model="#fence"
                rotation="0 68.5 0"
                position="24.646 0 -27.120"
            >
            </a-entity>
            
            <!-- Gate -->
            <a-entity 
                gltf-model="#gate"
                position="-11.607 0 -8.380"
            >
            </a-entity>
            <!-- the human model and boxes to detect gaze taps-->
            <a-entity position="0 0 0">
                <a-entity position="-2.922 0.4 -1.172" rotation="0 55.0 0">
                    <a-plane width="2.5" height="5" color="white" material="opacity:0.3; transparent: true;">
                        <a-entity position="0.5 1.5 0">
                            <a-entity position="-0.15 0 0.2" text="anchor:left;width:2.5;color:black;value:Test1"></a-entity>
                            <a-plane position="0 0 0.1" scale="0.6 0.3 0.6"
                                event-set__enter="_event: mouseenter; material.color: #FF0000"
                                event-set__leave="_event: mouseleave; material.color: #FFF"
                             >
                            </a-plane>
                        </a-entity>
                        <a-entity position="-0.5 1.5 0">
                            <a-entity position="-0.15 0 0.2" text="anchor:left;width:2.5;color:black;value:Test1"></a-entity>
                            <a-plane position="0 0 0.1" scale="0.6 0.3 0.6"
                                event-set__enter="_event: mouseenter; material.color: #FF0000"
                                event-set__leave="_event: mouseleave; material.color: #FFF"
                             >
                            </a-plane>
                        </a-entity>
                        <a-entity position="0.5 0.5 0">
                            <a-entity position="-0.15 0 0.2" text="anchor:left;width:2.5;color:black;value:Test1"></a-entity>
                            <a-plane position="0 0 0.1" scale="0.6 0.3 0.6"
                                event-set__enter="_event: mouseenter; material.color: #FF0000"
                                event-set__leave="_event: mouseleave; material.color: #FFF"
                             >
                            </a-plane>                        
                        </a-entity>
                        <a-entity position="-0.5 0.5 0">
                            <a-entity position="-0.15 0 0.2" text="anchor:left;width:2.5;color:black;value:Test1"></a-entity>
                            <a-plane position="0 0 0.1" scale="0.6 0.3 0.6"
                                event-set__enter="_event: mouseenter; material.color: #FF0000"
                                event-set__leave="_event: mouseleave; material.color: #FFF"
                             >
                            </a-plane>                        
                        </a-entity>
                    </a-plane>
                    <a-entity 
                      text="anchor:center;width:2.5;color:black;value:What illness does she have? Examine her closely by clicking on her"
                      position="0 2.3 0"
                    >
                    </a-entity>
                </a-entity>
                <a-entity gltf-model="#woman" position="0 0 0" scale="0.001 0.001 0.001"></a-entity>

                <a-entity template="src: #look" position="-0.02 1.52 0.15" data-height="0.15" data-width="0.15"></a-entity>
                <a-entity template="src: #look" position="-0.01 1.38 0.15" data-height="0.1" data-width="0.3"></a-entity>
                <a-entity template="src: #look" position="-0.18 1.09 0.15" data-height="0.5" data-width="0.10"></a-entity>
                <a-entity template="src: #look" position="0.14 1.09 0.15" data-height="0.5" data-width="0.10"></a-entity>
                <a-entity template="src: #look" position="-0.02 1.09 0.15" data-height="0.25" data-width="0.2"></a-entity>
                <a-entity template="src: #look" position="-0.1 0.55 0.2" data-height="0.6" data-width="0.13"></a-entity>
                <a-entity template="src: #look" position="0.105 0.55 0.2" data-height="0.6" data-width="0.13"></a-entity>
            </a-entity>
            <a-camera position="0 -0.1 0.9" id="camera" look-controls="enabled: true" wasd-controls="enabled: false">
                <a-entity
                    geometry='primitive: ring;radiusOuter: 0.015;radiusInner: 0.008;'
                    material='color: black; opacity: 0.5; transparent: true'
                    position='0 0 -0.5'
                    cursor='fuse: false'
                >
                </a-entity>
            </a-camera>
        </a-scene>
    </body>
</html>